# Core Context: Security, Config, & Shared Utilities

## 1. Security & Authentication
- **Hashing**: `app/core/security.py` uses `passlib` for DB hashes and custom SHA-512 for Copyparty sync.
- **Proxy Auth**: `app/core/auth.py` handles JWT and Basic Auth. It includes a `PurePythonCrypter` fallback for environments where `cryptography` cannot be compiled (e.g., some PyPy versions).
- **User Salt**: Authentication uses the username as a salt for the internal proxy password to prevent duplicate hash collisions in Copyparty.

## 2. Configuration
- **Settings**: `app/core/config.py` uses Pydantic `BaseSettings`.
- **Environment**: Configuration is loaded from `.env` and environment variables.
- **Jail Root**: `SERVE_DIR` is dynamically resolved based on `CUSTOM_SERVE_DIR`.

## 3. Operations
- **User Sync**: `app/core/user_sync.py` triggers the synchronization between the SQLite DB and `copyparty.conf`.
- **Logging**: `app/core/logger.py` provides centralized logging configuration.
